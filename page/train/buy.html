<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>buy</title>
</head>
<body>
    <div style="line-height: 50px;font-size: 20px;height: 50px;width: 1600px; color: rgb(255, 255, 255);background-color: rgb(97, 130, 240);">
        &emsp;&emsp;&emsp;<a style="text-decoration:none; color: white;" href="main.html">铁路购票系统</a>&emsp;&emsp;<a style="text-decoration:none; color: white;" href="buy.html">购票</a>&emsp;&emsp;登录/注册
    </div>
    <div style="line-height: 8px;position: absolute;top: 70px;border-radius: 10px; border:1px ridge rgb(147, 147, 245);height:100px; width:1600px; background-color:aliceblue;">
        <p>&emsp;</p>
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;始发站：<input onclick="in1()" id="bef3" name="始发站">
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;终点站：<input onclick="in2()" name="终点站" id="bef4">
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;出发日期：
            <select name="date" onchange="ch()">
            </select>
            <select name="datem" onchange="chm()">
            </select>
            <select name="dated">
            </select>

        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<button style="width: 100px">查询</button>
        <div style="position:absolute;top:25px;left:1110px">
        类型：<input type="radio" name="tyy" checked value="普通">普通
        <p>&emsp;&emsp;&emsp;<input type="radio" name="tyy" value="学生票">学生票</p></div>
        <div id="xuanze" style='display: none; position:absolute; border:1px solid rgb(121, 173, 245); top:50px; left: 350px;height:200px; width: 200px; overflow: scroll; background-color: rgb(255, 255, 255);'></div>

    </div>
    <div style="line-height: 8px;position: absolute;top: 190px; border:1px ridge rgb(147, 147, 245);height:80px; width:1600px; background-color:rgb(255, 255, 255); color:darkslategrey">
        <p></p>
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;车次类型：<input type="checkbox" name="chex" value="全部" checked>全部
        <input type="checkbox" name="chex" value="高铁">G-高铁
        <input type="checkbox" name="chex" value="动车">D-动车
        <input type="checkbox" name="chex" value="快速">K-快速
        &emsp;&emsp;&emsp;&emsp;
        乘车时间区间: 
        <select name="shi">
        </select>
        时
        <select name="fen">
        </select>
        分&emsp;---&emsp;
        <select name="shi2">
        </select>
        时
        <select name="fen2">
        </select>
        分
    </div>
    <div style="line-height: 1px;position: absolute;top: 290px; border:1px ridge rgb(147, 147, 245);height:50px; width:1600px; background-color:rgb(147, 147, 245); color:white">
        <p>&emsp;&emsp;</p>
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;车次&emsp;&emsp;&emsp;&emsp;出发-到达站&emsp;&emsp;&emsp;&emsp;出发-到达时间&emsp;&emsp;&emsp;&emsp;商务座&emsp;&emsp;一等座&emsp;&emsp;二等座&emsp;&emsp;一等卧&emsp;&emsp;二等卧
    </div>
    <div style="position: absolute;top: 340px;" id="chepiao">

    </div> 
    <div id="xuanze2" style='display: none; position:absolute; border:1px solid rgb(121, 173, 245); top:50px; left: 350px;height:200px; width: 200px; overflow: scroll; background-color: rgb(255, 255, 255);'>
    
    </div>

    <script>
        
        var d=new Date();
        var year=d.getFullYear();
        var year2=d.getFullYear()+1;
        var month2=d.getMonth()+2;
        var month=d.getMonth()+1;
        var daa=0;
        var daiin=document.getElementsByTagName("select")[0];
        daiin.innerHTML+="<option>"+year+"</option><option>"+year2+"</option>";    
               
        var daiin2=document.getElementsByTagName("select")[1];
        daiin2.innerHTML+="<option>"+month+"</option><option>"+month2+"</option>";        
        
        var daiin3=document.getElementsByTagName("select")[2];
        var md=new Array();
        var yearc=document.getElementsByName("date")[0].value;
        var mousc=document.getElementsByName("datem")[0].value;

        function ch(){
            yearc=document.getElementsByName("date")[0].value;
        }
        function chm(){
            yearc=document.getElementsByName("datem")[0].value;
        }
        if(yearc%4==0)
            md=[31,29,31,30,31,30,31,31,30,31,30,31];
        else    
            md=[31,28,31,30,31,30,31,31,30,31,30,31];
        var dj=0;
        for(dj=0;dj<md[mousc-1];dj++){
            daa=dj+1;
            daiin3.innerHTML+="<option>"+daa+"</option>";
        }
    </script>
    <script>
        var shi=document.getElementsByName("shi")[0];
        var fen=document.getElementsByName("fen")[0];
        for(var i1=0;i1<24;i1++){
            shi.innerHTML+="<option>"+i1+"</option>";
        }
        for(var i3=0;i3<60;i3++){
            fen.innerHTML+="<option>"+i3+"</option>";
        }
        var shi2=document.getElementsByName("shi2")[0];
        var fen2=document.getElementsByName("fen2")[0];
        for(var i1=23;i1>-1;i1--){
            shi2.innerHTML+="<option>"+i1+"</option>";
        }
        for(var i3=59;i3>-1;i3--){
            fen2.innerHTML+="<option>"+i3+"</option>";
        }
        
    </script>
    <script>
        var sta=decodeURI(window.location.href).split('?')[1].split('&')[0];
        var end=decodeURI(window.location.href).split('?')[1].split('&')[1];
        var da=decodeURI(window.location.href).split('?')[1].split('&')[2];
        var dam=decodeURI(window.location.href).split('?')[1].split('&')[3];
        var dad=decodeURI(window.location.href).split('?')[1].split('&')[4];
        document.getElementById("bef3").value=sta;
        document.getElementById("bef4").value=end;
        for(var d1=0;d1<document.getElementsByName("date")[0].length;d1++){
            if(document.getElementsByName("date")[0].options[d1].innerHTML==da){
                document.getElementsByName("date")[0].options[d1].selected=true;
                break;
            }
        }
        for(var d1=0;d1<document.getElementsByName("datem")[0].length;d1++){
            if(document.getElementsByName("datem")[0].options[d1].innerHTML==dam){
                document.getElementsByName("datem")[0].options[d1].selected=true;
                break;
            }
        }
        
        for(var d1=0;d1<document.getElementsByName("dated")[0].length;d1++){
            if(document.getElementsByName("dated")[0].options[d1].innerHTML==dad){
                document.getElementsByName("dated")[0].options[d1].selected=true;
                break;
            }
        }
    </script>
    <script>
     //   function huizhi(){
            var ii=0;
            var chepiao=document.getElementById("chepiao");
            var ur=encodeURI("pay.html?"+"北京="+"上海="+"7:03="+"9:30="+"G0000="+document.getElementsByName("date")[0].options[0].innerHTML
            +"-"+document.getElementsByName("datem")[0].options[0].innerHTML+"-"+document.getElementsByName("dated")[0].options[0].innerHTML);
            for(ii=0;ii<1;ii++){
                chepiao.innerHTML+="<a style='text-decoration:none' href='"+ur+"'><div style='line-height: 1px;height: 50px; width: 1600px; border: 1px solid rgb(121, 173, 245);background-color: floralwhite;'>" +
                "<p>&emsp;</p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;G0000&emsp;&emsp;&emsp;&emsp;北京-上海&emsp;&emsp;&emsp;&emsp;7:03-9:30&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;有座&emsp;&emsp;&emsp;有座&emsp;&emsp;&emsp;有座&emsp;&emsp;&emsp;有座&emsp;&emsp;&emsp;有座</div></a>"
            }
      //  }
    </script>
    <script>
        function in1(){
           lis(1, document.getElementById('bef3').value);
           document.getElementById('xuanze2').style.display="block";
       }
       function in2(){
           lis(2, document.getElementById('bef4').value);
           document.getElementById('xuanze2').style.display="block";
       }
       var a=new Array();
       a=["北京","上海","天津","重庆","长沙","长春","成都","福州"];
       
       function cd(obj){
           document.getElementById('bef3').value= obj.innerHTML;
           document.getElementById('xuanze2').style.display="none";
       }
       function cd2(obj){
           document.getElementById('bef4').value= obj.innerHTML;
           document.getElementById('xuanze2').style.display="none";
       }
       function lis(p, cha){
           
           var a2=new Array();
           
           var i2=0;
           var i3=0;
           var x=0;
           var y=0;
           var chu;
           for(i2=0, i3=0;i2<a.length;i2++){
               if(a[i2].includes(cha)||cha==null){
                   a2[i3]=a[i2];
                   i3++;
               }    
           }
           if(p==1)
               chu="cd(this)";
           else
               chu="cd2(this)";
           var before=document.getElementById('xuanze2');
           for(i2=0;i2<a.length;i2++){
               x=0+i2%4*50;
               y=0+Math.floor(i2/4)*20;
               if(i2>a2.length||i2==a2.length){
                   before.innerHTML+="<button id='"+i2+"' onclick='"+chu+"' style='background-color: rgb(255, 255, 255);position:absolute; border-width:1px; top:"+y+"px; left: "+x+"px; width: 50px'>&emsp;</button>";
                   continue;
               }
               before.innerHTML+="<button id='"+i2+"' onclick='"+chu+"' style='background-color: rgb(255, 255, 255);position:absolute; border-width:1px; top:"+y+"px; left: "+x+"px; width: 50px'>"+a2[i2]+"</button>";
           }
       }
   </script>
</body>
</html>